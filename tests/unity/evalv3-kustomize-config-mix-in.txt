# spec.artifacts.0.generators.1.file present with evalv3=0
env CUE_EXPERIMENT=embed,evalv3=0
exec cue export --out yaml -e holos ../stacks/argocd/components/argocd-crds
cmp stdout $WORK/golden.yaml

# spec.artifacts.0.generators.1.file missing with evalv3=1 (fails, should pass)
env CUE_EXPERIMENT=embed,evalv3=1
exec cue export --out yaml -e holos ../stacks/argocd/components/argocd-crds
cmp stdout $WORK/golden.yaml

-- golden.yaml --
kind: BuildPlan
apiVersion: v1alpha5
metadata:
  name: no-name
spec:
  artifacts:
    - artifact: components/no-name/no-name.gen.yaml
      generators:
        - kind: Resources
          output: resources.gen.yaml
          resources: {}
        - kind: File
          output: argocd-crds.2.13.2.yaml
          file:
            source: argocd-crds.2.13.2.yaml
      validators: []
      transformers:
        - kind: Kustomize
          inputs:
            - resources.gen.yaml
            - argocd-crds.2.13.2.yaml
          output: components/no-name/no-name.gen.yaml
          kustomize:
            kustomization:
              resources:
                - resources.gen.yaml
                - argocd-crds.2.13.2.yaml
              kind: Kustomization
              apiVersion: kustomize.config.k8s.io/v1beta1
